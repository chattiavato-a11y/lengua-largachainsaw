<!-- index.html — GitHub Pages UI (signed chat; default live fallback; Cloudflare sanity check) -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Chattia</title>
<meta name="integrity-token" content="https://chattiavato-a11y.github.io">
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  integrity="sha512-RXf+QSDCUqpphKAa+WAc3XQ8fE5H1aO/8e2wY+8Q1n8yVwDh1RZTf1TDN8E+u1n7eU5KyY7X2Qo+hqeZZn+UAQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
:root{
  --clr-primary:#00c4ff; --clr-accent:#ff3bdb;
  --body-bg:#050111; --body-text:#f4f3ff;
  --surface:#251541; --surface-soft:#220f3a; --surface-alt:#1b0e2d;
  --bot-bg:#321b53; --bot-text:#fff; --user-text:#050118;
  --control-bg:rgba(255,255,255,0.08)
}
body[data-theme="light"]{
  --body-bg:#fdfbff; --body-text:#1b1030;
  --surface:#faf6ff; --surface-alt:#f5edff; --surface-soft:#ece0ff;
  --bot-bg:#efe7ff; --bot-text:#2d1650; --control-bg:rgba(10,4,32,0.08)
}
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; font-family:system-ui,Segoe UI,Arial,sans-serif;
  background:var(--body-bg); color:var(--body-text);
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)
}
#chatbot-container{
  position:fixed; right:16px; bottom:16px;
  width:min(380px,calc(100vw - 32px)); height:min(640px,calc(100vh - 32px));
  background:var(--surface); border:2px solid var(--clr-accent); border-radius:18px; overflow:hidden;
  display:flex; flex-direction:column; box-shadow:0 20px 50px rgba(5,1,17,.45); z-index:10
}
@supports (height:100dvh){ #chatbot-container{height:min(640px,calc(100dvh - 32px))} }
#chatbot-header{ display:flex; align-items:center; gap:.5rem; justify-content:space-between;
  padding:.7rem .9rem; background:linear-gradient(135deg,var(--clr-primary),var(--clr-accent)); color:#fff }
#chatbot-header h1{ margin:0; font-size:1.05rem }
.header-actions{ display:flex; gap:.5rem }
.ctrl-btn{ background:rgba(255,255,255,.18); border:none; border-radius:999px; color:#fff; padding:.3rem .8rem; font-weight:600; cursor:pointer }
.ctrl-btn:focus-visible{ outline:2px solid #fff; outline-offset:2px }

#status-banner{ background:var(--surface-soft); color:#fff; padding:.4rem .8rem; font-size:.85rem }
#status-banner.status-online{ background:rgba(0,200,110,.25) }
#status-banner.status-offline{ background:rgba(230,0,0,.25) }
#status-banner.status-fallback{ background:rgba(255,180,0,.25) }

#chat-log{ flex:1; overflow:auto; padding:1rem; background:var(--surface-alt); color:var(--bot-text); font-size:.95rem }
.chat-msg{ margin:.5rem 0; max-width:90%; line-height:1.35; word-wrap:break-word }
.user{ margin-left:auto; background:var(--clr-primary); color:var(--user-text); padding:.5rem .7rem; border-radius:16px 16px 0 16px }
.bot{ margin-right:auto; background:var(--bot-bg); color:var(--bot-text); padding:.5rem .7rem; border-radius:16px 16px 16px 0 }

#chatbot-form-container{ background:var(--surface-soft); border-top:1px solid rgba(255,255,255,.12); padding:.65rem .9rem calc(.65rem + env(safe-area-inset-bottom)) }
#chatbot-input-row{ display:flex; gap:.6rem }
#chatbot-input{ flex:1; background:var(--control-bg); border:none; border-radius:12px; color:var(--bot-text); font-size:.95rem; padding:.6rem .75rem }
#chatbot-send{ display:flex; align-items:center; justify-content:center; gap:6px; background:var(--clr-accent); border:none; color:#fff; font-weight:600; padding:.55rem .95rem; border-radius:12px; cursor:pointer; box-shadow:0 6px 16px rgba(255,59,219,.35) }
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}

.turnstile-slot{height:0;overflow:hidden}
@media (max-width:560px){
  #chatbot-container{ inset:0; width:100vw; height:100vh; border-radius:0 }
  @supports(height:100dvh){ #chatbot-container{height:100dvh} }
}
</style>
</head>
<body>

<div id="chatbot-container" role="dialog" aria-modal="true">
  <div id="chatbot-header">
    <h1 id="titleEl">Chattia</h1>
    <div class="header-actions">
      <button id="langCtrl" class="ctrl-btn" type="button" aria-pressed="false" aria-label="Switch language">ES</button>
      <button id="themeCtrl" class="ctrl-btn" type="button" aria-pressed="false">Dark</button>
    </div>
  </div>
  <div id="status-banner" class="status-online"><span id="statusText">Secure link active</span></div>
  <div id="chat-log" aria-live="polite"></div>
  <div id="chatbot-form-container">
    <form id="chatbot-input-row" autocomplete="off">
      <div id="turnstile-slot" class="turnstile-slot" aria-hidden="true"></div>
      <input id="turnstile-token" type="hidden" name="cf-turnstile-response" value="" data-require="false">
      <label class="visually-hidden" for="chatbot-company">Company</label>
      <input id="chatbot-company" type="text" name="company" autocomplete="off" aria-hidden="true" tabindex="-1" style="position:absolute;left:-9999px">
      <input id="chatbot-input" type="text" placeholder="Type your message… [Enter]" maxlength="256">
      <button id="chatbot-send" type="submit" aria-label="Send"><i class="fa fa-arrow-right"></i></button>
    </form>
  </div>
</div>

<script src="services/fallback_kb.js"></script>
<script src="js/chat.js"></script>
</body>
</html>
